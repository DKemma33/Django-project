{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="{% static 'image/logo/logo-color.png' %}" type="image/x-icon">
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard-dynamic-subset.css"
    />
    <link rel="stylesheet" href="{% static 'css/message/detail.css' %}" />
    <link rel="stylesheet" href="{% static 'css/mypage/myprofile.css' %}" />
  </head>
  <body>
    <div id="wrap">
      <div class="wrap-screen-flex">
        <header id="header">
          <div class="header-logo">
            <div class="header-logo-container">
              <a href="/">
                <img src="{% static 'image/logo/white.png' %}" alt="">
              </a>
              <div class="header-logo-line">|</div>
              <div class="header-logo-teacherStudio"><span>Helpers Studio</span></div>
            </div>
          </div>
          <div class="header-profile">
              <div class="unread-alarm" style="color: white">{{ unread_count }}</div>
            <div class="header-profile-pos">
              <button class="header-profile-btn">
                <span class="header-profile-btn-span">
                  <img src="/upload/{{ member_file }}">
                </span>
              </button>
            </div>
          </div>
        </header>
        <div id="main">
          <nav class="side-nav">
                <div class="side-nav-top">
                    <div class="side-nav-top-flex">
                        <div class="side-nav-top-profile-icon">
                            <button class="side-nav-top-profile-icon-btn" type="button">
                                <span class="side-nav-top-profile-icon-img">
                                    <img src="/upload/{{ member_file }}"/>
                                </span>
                                <span class="side-nav-top-profile-icon-border"></span>
                            </button>
                        </div>
                        <h2 class="side-nav-top-nickname">{{ member_nickname }}</h2>
                        <a class="side-nav-top-mypage" href="/profile/{{ member.id }}">
                            <button class="side-nav-top-mypage-btn" type="button">
                                <div class="side-nav-top-mypage-btn-flex">
                                    <div>내 프로필</div>
                                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="16px"
                                         width="16px">
                                        <path d="M11 7a1 1 0 0 0-1-1H4v14h14v-6a1 1 0 1 0-2 0v4H6V8h4a1 1 0 0 0 1-1Z"></path>
                                        <path
                                                d="M19.01 3.829H20v6.656a1 1 0 1 1-2 0V7.244l-5.293 5.293a1 1 0 0 1-1.414-1.415l5.293-5.292h-3.243a1 1 0 1 1 0-2H19.01Z">
                                        </path>
                                    </svg>
                                </div>
                            </button>
                        </a>
                    </div>
                </div>
                <ul class="side-nav-bottom">
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:myprofile' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M15.4 4.4H8.8a4.4 4.4 0 0 0-4.4 4.4v6.6a4.4 4.4 0 0 0 4.4 4.4h6.6a4.4 4.4 0 0 0 4.4-4.4V8.8a4.4 4.4 0 0 0-4.4-4.4ZM8.8 2.8a6 6 0 0 0-6 6v6.6a6 6 0 0 0 6 6h6.6a6 6 0 0 0 6-6V8.8a6 6 0 0 0-6-6H8.8Z">
                                </path>
                                <path
                                        d="M12.2 12.5a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM12.2 16.4c2.21 0 4-.672 4-1.5s-1.79-1.5-4-1.5-4 .672-4 1.5 1.79 1.5 4 1.5Z">
                                </path>
                            </svg>
                            <span>내 페이지</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:mylesson_init' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M15.078 3.137H8.6a5.6 5.6 0 0 0-5.6 5.6v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.944l-1.6 1.6v4.993a4 4 0 0 1-4 4H8.6a4 4 0 0 1-4-4v-6.8a4 4 0 0 1 4-4h4.878l1.6-1.6Z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="m20.692 7.116.534-.534a2.567 2.567 0 1 0-3.63-3.63L9.41 11.138l-1.103 3.74a.8.8 0 0 0 .994.993l3.74-1.103 6.52-6.52.005.004 1.13-1.132-.004-.004Zm-2.262 0-6.233 6.233-1.94.572.572-1.94 6.233-6.233 1.368 1.368Zm1.131-1.132-1.367-1.367.533-.534a.967.967 0 0 1 1.368 1.368l-.534.533Z">
                                </path>
                            </svg>
                            <span>과외 목록</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:mylesson-review_init' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M15.078 3.137H8.6a5.6 5.6 0 0 0-5.6 5.6v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.944l-1.6 1.6v4.993a4 4 0 0 1-4 4H8.6a4 4 0 0 1-4-4v-6.8a4 4 0 0 1 4-4h4.878l1.6-1.6Z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="m20.692 7.116.534-.534a2.567 2.567 0 1 0-3.63-3.63L9.41 11.138l-1.103 3.74a.8.8 0 0 0 .994.993l3.74-1.103 6.52-6.52.005.004 1.13-1.132-.004-.004Zm-2.262 0-6.233 6.233-1.94.572.572-1.94 6.233-6.233 1.368 1.368Zm1.131-1.132-1.367-1.367.533-.534a.967.967 0 0 1 1.368 1.368l-.534.533Z">
                                </path>
                            </svg>
                            <span>과외 후기</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:myhelpers_init' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M15.078 3.137H8.6a5.6 5.6 0 0 0-5.6 5.6v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.944l-1.6 1.6v4.993a4 4 0 0 1-4 4H8.6a4 4 0 0 1-4-4v-6.8a4 4 0 0 1 4-4h4.878l1.6-1.6Z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="m20.692 7.116.534-.534a2.567 2.567 0 1 0-3.63-3.63L9.41 11.138l-1.103 3.74a.8.8 0 0 0 .994.993l3.74-1.103 6.52-6.52.005.004 1.13-1.132-.004-.004Zm-2.262 0-6.233 6.233-1.94.572.572-1.94 6.233-6.233 1.368 1.368Zm1.131-1.132-1.367-1.367.533-.534a.967.967 0 0 1 1.368 1.368l-.534.533Z">
                                </path>
                            </svg>
                            <span>헬퍼스 목록</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:myevent_init' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M15.078 3.137H8.6a5.6 5.6 0 0 0-5.6 5.6v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.944l-1.6 1.6v4.993a4 4 0 0 1-4 4H8.6a4 4 0 0 1-4-4v-6.8a4 4 0 0 1 4-4h4.878l1.6-1.6Z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="m20.692 7.116.534-.534a2.567 2.567 0 1 0-3.63-3.63L9.41 11.138l-1.103 3.74a.8.8 0 0 0 .994.993l3.74-1.103 6.52-6.52.005.004 1.13-1.132-.004-.004Zm-2.262 0-6.233 6.233-1.94.572.572-1.94 6.233-6.233 1.368 1.368Zm1.131-1.132-1.367-1.367.533-.534a.967.967 0 0 1 1.368 1.368l-.534.533Z">
                                </path>
                            </svg>
                            <span>이벤트 목록</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item-active">
                        <a class="side-nav-bottom-item-a-active" href="">
                            <svg viewBox="0 0 24 25" xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M21.38 2.768a1.726 1.726 0 0 0-2.441 0L17.807 3.9l2.442 2.441L21.38 5.21a1.727 1.727 0 0 0 0-2.441ZM19.141 7.449 16.7 5.007l-6.542 6.541-1.193 2.573c-.314.676.386 1.376 1.062 1.062L12.6 13.99l6.541-6.541Z">
                                </path>
                                <path
                                        d="M16.015 3.233A5.662 5.662 0 0 0 15.4 3.2H8.6A5.6 5.6 0 0 0 3 8.8v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.8c0-.247-.016-.49-.047-.729l-7.397 7.075a.447.447 0 0 1-.127.086l-2.764 1.228a2.281 2.281 0 0 1-3.034-2.959l.915-2.205a4.805 4.805 0 0 1 1.02-1.536l6.449-6.527Z">
                                </path>
                            </svg>
                            <span>쪽지 목록</span>
                        </a>
                    </li>
                    <li class="side-nav-bottom-item">
                        <a class="side-nav-bottom-item-a" href="{% url 'mypage:mypay' %}">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M15.3 4.3H8.7a4.4 4.4 0 0 0-4.4 4.4v6.6a4.4 4.4 0 0 0 4.4 4.4h6.6a4.4 4.4 0 0 0 4.4-4.4V8.7a4.4 4.4 0 0 0-4.4-4.4ZM8.7 2.7a6 6 0 0 0-6 6v6.6a6 6 0 0 0 6 6h6.6a6 6 0 0 0 6-6V8.7a6 6 0 0 0-6-6H8.7Z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M8.874 14.516c.129.434.543.734 1.014.734.474 0 .89-.303 1.016-.74l.724-2.501h.66l.724 2.501c.126.437.542.74 1.015.74.472 0 .886-.3 1.015-.734l.743-2.507h.6c.34 0 .615-.264.615-.59a.603.603 0 0 0-.615-.589h-.252l.274-.925c.135-.454-.221-.905-.714-.905a.737.737 0 0 0-.72.539l-.338 1.291h-1.409l-.3-1.113A.992.992 0 0 0 11.96 9a.99.99 0 0 0-.967.721l-.295 1.11H9.283l-.339-1.293A.738.738 0 0 0 8.224 9c-.494 0-.85.451-.715.906l.274.924h-.168a.603.603 0 0 0-.615.59c0 .325.276.589.615.589h.516l.743 2.507Zm.718-2.507h.793l-.368 1.388h-.06l-.365-1.388Zm4.32 1.365-.368-1.365h.783l-.356 1.365h-.06Z">
                                </path>
                            </svg>
                            <span>결제 내역</span>
                        </a>
                    </li>
                </ul>
            </nav>
          <div class="main-content">
            <div class="main-content-grid">
              <div class="content-wrapper">
                <div class="content-container">
                  <div class="top-wrapper">
                    <!-- 제목 및 답장 버튼 -->


                    <div class="title-wrapper">
                      {% if type == 'receive' %}
                        <h3>{{ receive_message.message_title }}</h3>
                      {% elif type == 'send' %}
                        <h3>{{ send_message.message_title }}</h3>
                      {% endif %}
                      <div style="display: flex">
                        <div style="width: 88px">
                          <button class="to-list" type="button" onclick="location.href='/mypage/message-list'">목록 보기</button>
                        </div>
                        <div style="width: 88px; margin-left: 12px">
                          <button class="write" type="button" onclick="location.href='/mypage/message-write/'">작성</button>
                        </div>
                      </div>
                    </div>
                    <!-- 작성자 및 시간 -->
                    <div class="write-info-wrapper">
                      <div class="write-info">
                        <div>
                          <a href="">
                            <div class="profile">
                                <img src="/upload/{{ send_member_profile_img }}">
                            </div>
                          </a>
                        </div>
                        <div>
                          <div>
                            <a class="writer" href="">{{ send_member_nickname }}</a>
                          </div>
                          <div class="time-wrapper">
                              {% if type == 'receive' %}
                                <div class="time">
                                  <span>{{ receive_message.created_date|date:"Y-m-d" }}</span>
                                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="4"></circle>
                                  </svg>
                                  <span>{{ receive_message.created_date|time:"H:i" }}</span>
                                </div>
                              {% elif type == 'send' %}
                                <div class="time">
                                  <span>{{ send_message.created_date|date:"Y-m-d" }}</span>
                                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="4"></circle>
                                  </svg>
                                  <span>{{ send_message.created_date|time:"H:i" }}</span>
                                </div>
                              {% endif %}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- 내용 -->
                  <div class="content-wrapper">
                    <div class="content">
                      <p class="message-content"></p>
                      <div class="image-wrapper">
                      {% if type == 'receive' %}
                        {% for receive_file in receive_files  %}
                            <img style="display:block; margin: 0 auto 10px auto" width="400px" src="/upload/{{ receive_file.image }}"/>
                        {% endfor %}
                      {% elif type == 'send' %}
                        {% for send_file in send_files  %}
                            <img style="display:block; margin: 0 auto 10px auto" width="400px" src="/upload/{{ send_file.image }}"/>
                        {% endfor %}
                      {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script>
      const receive_message = '{{ receive_message.message_content }}'.replaceAll("&lt;", "<").replaceAll("&gt;", ">").replaceAll("&quot;", '"')
      const send_message = '{{ send_message.message_content }}'.replaceAll("&lt;", "<").replaceAll("&gt;", ">").replaceAll("&quot;", '"')
      '{{ type }}' == 'receive' ? $('.message-content').html(receive_message) : $('.message-content').html(send_message)
      console.log(`{{ receive_message.message_status }}`);
  </script>
</html>
